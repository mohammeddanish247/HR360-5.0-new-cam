{"version":3,"file":"src_app_appliancedetails_appliancedetails_module_ts-es2015.js","mappings":"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","sources":["./src/app/appliancedetails/appliancedetails-routing.module.ts","./src/app/appliancedetails/appliancedetails.module.ts","./src/app/appliancedetails/appliancedetails.page.ts","./src/app/appliancedetails/appliancedetails.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AppliancedetailsPage } from './appliancedetails.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AppliancedetailsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AppliancedetailsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AppliancedetailsPageRoutingModule } from './appliancedetails-routing.module';\n\nimport { AppliancedetailsPage } from './appliancedetails.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AppliancedetailsPageRoutingModule\n  ],\n  declarations: [AppliancedetailsPage]\n})\nexport class AppliancedetailsPageModule {}\n","import { DatePipe } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router, NavigationExtras } from '@angular/router';\nimport { ApiService } from '../api.service';\n\n@Component({\n  selector: 'app-appliancedetails',\n  templateUrl: './appliancedetails.page.html',\n  styleUrls: ['./appliancedetails.page.scss'],\n})\nexport class AppliancedetailsPage implements OnInit {\n\n  data: any[];\n  Detailsworkcarriedout:string=' ';\n  appliancestestedNumber:string=' ';\n  safetycheckDate: string;\n  currentyear: any;\n  lastyear: any;\n  constructor(private router:Router, private route:ActivatedRoute, private auth:ApiService,\n    private datePipe : DatePipe) { }\n\n  ngOnInit() {\n    this.currentyear = this.auth.getdateformatV2();\n    this.currentyear = this.currentyear.split(\"/\")[2];\n    this.currentyear = parseInt(this.currentyear.split(\" \")[0]);\n    this.lastyear = this.currentyear+10;\n    \n    this.route.queryParams.subscribe(params=>{\n      if(this.router.getCurrentNavigation().extras.state){\n        this.data   = this.router.getCurrentNavigation().extras.state.data;}\n        this.auth.getLocation();  \n      });\n\n      this.auth.database.executeSql('select * from certificate where JOBGUID=?',[this.data['JOBGUID']])\n      .then(res => {\n        console.log(\"@@\"+res.rows.item(0)['JOBGUID']+\",\"+res.rows.item(0)['DetailsWork']+\",\"+res.rows.item(0)['NoOfAppTested']+\",\"+res.rows.item(0)['NextDueDt']);\n        const inputDate = res.rows.item(0)['NextDueDt'];\n        const [dd, MM, yyyy, HH, mm, ss] = inputDate.split(/[\\s/:]+/); // split the date string into components\n        const isoDate = new Date(`${yyyy}-${MM}-${dd}T${HH}:${mm}:${ss}`).toISOString(); //converting to ISO date formate\n        this.Detailsworkcarriedout = res.rows.item(0)['DetailsWork'];\n        this.appliancestestedNumber = res.rows.item(0)['NoOfAppTested'];\n        this.safetycheckDate = isoDate;\n      }).catch(e=>{console.log(\"error getting saved certicate appliance Details :\"+e);\n    })\n  }\n  saveNext(){\n      if(this.Detailsworkcarriedout==' ' || this.Detailsworkcarriedout== undefined){\n        this.auth.showToast('Details of work carried out cannot be empty','danger');\n\n      }else{\n\n      if(this.appliancestestedNumber==' ' || this.appliancestestedNumber == undefined){\n\n        this.auth.showToast('Number of appliances tested cannot be empty','danger');\n\n      }else{\n\n        if( parseInt(this.appliancestestedNumber)>4){\n\n        this.auth.showToast('Number of tested devices cannot be more than 4','danger');\n\n        }else{\n\n          if(this.safetycheckDate==null){\n            this.auth.showToast('Safety check date can not be empty.','danger');\n\n          }else{\n            console.log(\"before \" +this.safetycheckDate);\n            let date = new Date(this.safetycheckDate);\n            let formattedDate= this.datePipe.transform(date, 'dd/MM/yyyy HH:mm:ss');\n            console.log(\"after \" +this.safetycheckDate);\n            // this.auth.showToast(a);\n            this.auth.database.executeSql('update certificate set DetailsWork=?, NoOfAppTested=?, NextDueDt=? where JOBGUID=?',[this.Detailsworkcarriedout,this.appliancestestedNumber, formattedDate,this.data['JOBGUID']])\n           .then((res)=>{\n            this.data['DetailsWork']=this.Detailsworkcarriedout;\n            this.data['NoOfAppTested']=this.appliancestestedNumber;\n            this.data['NextDueDt']=this.safetycheckDate;\n            \n            console.log(JSON.stringify(res));\n            const navigationExtras: NavigationExtras = {\n              state: {\n              data: this.data,\n                    }\n             };\n              this.router.navigate(['outcomes'], navigationExtras);\n            }).catch((e)=>{\n              this.auth.showToast('Error Saving Data '+e,'danger');    \n            });\n          }\n         \n        }\n        \n        }\n      }\n  }\n\n  isDateFormatValid(dateString: string): boolean {\n    const pattern = /^(\\d{2})\\/(\\d{2})\\/(\\d{4}) (\\d{2}):(\\d{2}):(\\d{2})$/;\n    return pattern.test(dateString);\n  }\n}\n","export default \"<ion-header>\\n  <ion-toolbar color=\\\"secondary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n      <ion-title>Appliances</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-card>\\n  <ion-item>\\n    <ion-label position=\\\"floating\\\">Details of work carried out</ion-label>\\n    <ion-textarea rows=\\\"6\\\" cols=\\\"20\\\" [(ngModel)]=\\\"Detailsworkcarriedout\\\" placeholder=\\\"Write details here...\\\" ></ion-textarea>\\n  </ion-item>\\n\\n  <ion-item>\\n    <ion-label position=\\\"floating\\\">Number of appliances tested</ion-label>\\n    <ion-input type=\\\"number\\\" inputmode=\\\"numeric\\\" [(ngModel)]=\\\"appliancestestedNumber\\\"\\n     required placeholder=\\\"appliances tested No.\\\"></ion-input>\\n  </ion-item>\\n    \\n  \\n\\n  <ion-item>\\n    <ion-label position=\\\"floating\\\">Next safety check due by</ion-label>\\n    <ion-datetime display-format=\\\"DD/MM/YYYY\\\" picker-format=\\\"DD MM YYYY\\\" [min]=\\\"currentyear\\\" [max]=\\\"lastyear\\\"  [(ngModel)]=\\\"safetycheckDate\\\" #safetycheck=\\\"ngModel\\\" required placeholder=\\\"Tap here to enter Date\\\"></ion-datetime>\\n  </ion-item>\\n\\n  <div *ngIf=\\\"safetycheck.invalid && (safetycheck.dirty || safetycheck.touched)\\\" class=\\\"validator-error\\\">\\n    <div *ngIf=\\\"safetycheck.errors.required\\\">\\n      Please select a valid date.\\n    </div>\\n  </div>\\n</ion-card>\\n</ion-content>\\n\\n<ion-footer>\\n  <ion-button expand=\\\"full\\\"  color=\\\"secondary\\\" (click)=\\\"saveNext()\\\">Save & Next</ion-button>\\n</ion-footer>\\n\";"],"names":[],"sourceRoot":"webpack:///"}