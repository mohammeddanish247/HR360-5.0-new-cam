{"version":3,"file":"src_app_complete_complete_module_ts-es2015.js","mappings":"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","sources":["./src/app/complete/complete-routing.module.ts","./src/app/complete/complete.module.ts","./src/app/complete/complete.page.ts","./src/app/complete/complete.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CompletePage } from './complete.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CompletePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CompletePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CompletePageRoutingModule } from './complete-routing.module';\n\nimport { CompletePage } from './complete.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CompletePageRoutingModule\n  ],\n  declarations: [CompletePage]\n})\nexport class CompletePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Camera, CameraResultType, CameraSource, ImageOptions } from '@capacitor/camera';\nimport { ApiService } from '../api.service';\nimport { Form, NgForm } from '@angular/forms';\nimport { Router, ActivatedRoute } from '@angular/router';\n\n///////////////////completed\n\n@Component({\n  selector: 'app-complete',\n  templateUrl: './complete.page.html',\n  styleUrls: ['./complete.page.scss'],\n})\nexport class CompletePage implements OnInit {\n\n  options: ImageOptions;\n  base64:string='';\n  updatePicture :any='';\n  jobOutCome : string='';\n  data:any[];\n\n  constructor(private router:Router, private route:ActivatedRoute, private auth:ApiService) { }\n\n  ngOnInit() {\n    this.route.queryParams.subscribe(params=>{\n      if(this.router.getCurrentNavigation().extras.state){\n        this.data   = this.router.getCurrentNavigation().extras.state.data; \n        this.auth.getLocation();  \n        // this.getdata();  \n      }\n    });\n  }\n\n  getdata() {\n    this.auth.database.executeSql('select * from abandon where JOBGUID=?',[this.data['JOBGUID']])\n    .then((res)=>{\n        let f : NgForm;\n        this.jobOutCome = res.rows.item(0)['OUTCOME'];\n        f.value.additional = res.rows.item(0)['JOBNOTE'];\n        this.base64 = res.rows.item(0)['FILEBASE'];\n   });\n  }\n\n  radiogroupChange(event){\n    console.log(' rg change '+event.detail.value);\n    this.jobOutCome = event.detail.value;\n}\n\n  openCamera(){\n    this.options = {\n      quality: 20,\n      source: CameraSource.Camera,\n      height:360,\n      width:360,\n      resultType : CameraResultType.Base64,\n      allowEditing : false ,\n    }\n    \n    Camera.getPhoto(this.options).then((imageData) => {\n      // imageData is either a base64 encoded string or a file URI\n      // If it's base64 (DATA_URL):\n      let base64Image = 'data:image/jpeg;base64,' + imageData.base64String;\n      this.updatePicture = 'data:image/jpeg;base64,' + imageData.base64String;\n      this.base64 = imageData.base64String;\n      console.log('camera'+this.base64);\n     }, (err) => {\n      // Handle error\n     }); \n  }\n\n  complete(f:NgForm)\n  {\n    if(this.base64==null || this.base64 == ''){\n      this.auth.showToast('Image in mandatory','danger');\n     \n    }else\n    {\n\n      if(this.jobOutCome==''){\n        this.auth.showToast('Job Outcome in mandatory','danger');\n      }else{\n\n\n        if(f.value.additional==''){\n          this.auth.showToast('Additional notes in mandatory','danger');\n        }else{\n          if(f.value.parts==''){\n            this.auth.showToast('Parts in mandatory','danger');\n          }else{\n\n            if(f.value.labour==''){\n              this.auth.showToast('Labour in mandatory','danger');\n            }else{\n    \n              console.log('Else code..........' + this.data['JOBGUID']);\n              this.auth.database.executeSql('update  complete set OUTCOME=?,JOBNOTE=?,FILEBASE=?,OnDt=?,Latitude=?,Longitude=?, HaveData=? where JOBGUID=?', [this.jobOutCome,f.value.additional, this.base64, this.auth.getdateformatV2(), 'lat', 'long', 'yes', this.data['JOBGUID']])\n                .then((res) => {\n                  this.auth.database.executeSql(\"update  jobsstatus set  status=? where JOBGUID=? \",[ 'completed', this.data['JOBGUID']]).then((res)=>{\n                    console.log('#### jobsstatus success '+JSON.stringify(res));\n                    this.auth.showToast('Success! Job has been Completed.','success'); \n                    console.log('#### complete success ' + JSON.stringify(res));\n                    this.router.navigate(['details']);\n                \n                  }).catch((e)=>{  });\n                  \n                }).catch((e) => {\n                  console.log('### complete Failure ' + JSON.stringify(e));\n                });\n\n            }\n  \n          }\n\n        }\n\n\n      }\n     \n    }\n\n  }\n\n}\n\n","export default \"<ion-header>\\n  <ion-toolbar  color=\\\"secondary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n      <ion-title>Job Report</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <form #f='ngForm'  >\\n    <ion-radio-group  \\n    allow-empty-selection='false' \\n    (ionChange)='radiogroupChange($event)'>\\n      <ion-card>\\n      <ion-list-header>\\n        <h2>Job Outcome</h2>\\n      </ion-list-header>\\n      </ion-card>\\n      <ion-item lines=\\\"full\\\">\\n        <ion-label>Job Completed Successfully</ion-label>\\n        <ion-radio slot=\\\"end\\\" color=\\\"primary\\\" value=\\\"JobCompletedSuccessfully\\\"></ion-radio>\\n      </ion-item>\\n  \\n      <ion-item lines=\\\"full\\\">\\n        <ion-label>At Risk</ion-label>\\n        <ion-radio slot=\\\"end\\\" color=\\\"primary\\\" value=\\\"AtRisk\\\"></ion-radio>\\n      </ion-item>\\n  \\n      <ion-item lines=\\\"full\\\">\\n        <ion-label>Capped Off(Not Safe)</ion-label>\\n        <ion-radio slot=\\\"end\\\" color=\\\"primary\\\" value=\\\"CappedOff\\\"></ion-radio>\\n      </ion-item>\\n    </ion-radio-group>\\n    <ion-card>\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Parts</ion-label>\\n      <ion-input type=\\\"text\\\" \\n      ngModel \\n      name='parts'\\n      required\\n      #partsCtrl='ngModel'></ion-input>\\n    </ion-item>\\n    <p *ngIf='!partsCtrl.valid && partsCtrl.touched'>    * parts cannot be empty</p>\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Labour</ion-label>\\n      <ion-input type=\\\"text\\\"  \\n      ngModel \\n      name='labour'\\n      required\\n      #labourCtrl='ngModel' ></ion-input>\\n    </ion-item>\\n    </ion-card>\\n    <p *ngIf='!labourCtrl.valid && labourCtrl.touched'>    * labour cannot be empty</p>\\n\\n    <ion-card>\\n      <ion-item>\\n        <ion-textarea rows=\\\"6\\\" cols=\\\"20\\\" \\n         placeholder=\\\"Enter Additional Notes here...\\\"\\n         ngModel \\n         name='additional'\\n         required\\n         #additionalCtrl='ngModel'\\n         ></ion-textarea>\\n      </ion-item>\\n      </ion-card>\\n      <p *ngIf='!additionalCtrl.valid && additionalCtrl.touched'>    * additional cannot be empty</p>\\n\\n    <ion-item lines=\\\"full\\\">\\n      <p><b>Upload Image</b></p>\\n      <ion-icon slot=\\\"end\\\" name=\\\"camera\\\" (click)=\\\"openCamera()\\\"></ion-icon>\\n    </ion-item>\\n    <ion-card *ngIf=\\\"updatePicture!= null\\\">\\n      <img [src]=\\\"updatePicture\\\" />\\n    </ion-card>\\n    </form>\\n</ion-content>\\n\\n<ion-footer>\\n  <ion-button expand=\\\"full\\\" color=\\\"secondary  [disabled]='!f.valid' (click)=\\\"complete(f)\\\">Submit</ion-button>\\n</ion-footer>\\n\\n\";"],"names":[],"sourceRoot":"webpack:///"}