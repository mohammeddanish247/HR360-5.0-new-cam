{"version":3,"file":"src_app_abandoncall_abandoncall_module_ts-es2015.js","mappings":"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","sources":["./src/app/abandoncall/abandoncall-routing.module.ts","./src/app/abandoncall/abandoncall.module.ts","./src/app/abandoncall/abandoncall.page.ts","./src/app/abandoncall/abandoncall.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AbandoncallPage } from './abandoncall.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AbandoncallPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AbandoncallPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { AbandoncallPageRoutingModule } from './abandoncall-routing.module';\n\nimport { AbandoncallPage } from './abandoncall.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AbandoncallPageRoutingModule\n  ],\n  declarations: [AbandoncallPage]\n})\nexport class AbandoncallPageModule {}\n","import { Component, OnInit } from '@angular/core';\n// import { Camera, CameraOptions } from '@awesome-cordova-plugins/camera/ngx';\nimport { ApiService } from '../api.service';\nimport { Form, NgForm } from '@angular/forms';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Camera, CameraResultType, CameraSource, ImageOptions } from '@capacitor/camera'\n\n\n///// abandoned\n\n @Component({\n  selector: 'app-abandoncall',\n  templateUrl: './abandoncall.page.html',\n  styleUrls: ['./abandoncall.page.scss'],\n})\nexport class AbandoncallPage implements OnInit {\n\n  cameraOptions: ImageOptions;\n  galleryOption : ImageOptions\n  base64:string='';\n  updatePicture :any='';\n  jobOutCome : string='';\n  data:any[];\n  additionalNotes:any='';\n   jobOutComeFlag: boolean ;\n   imageFlage: boolean ;\n   additionalNotesFlage: boolean ;\n\n  constructor( private router:Router, private route:ActivatedRoute ,private auth:ApiService) { }\n\n  ngOnInit() {\n    this.route.queryParams.subscribe(params=>{\n      if(this.router.getCurrentNavigation().extras.state){\n        this.data   = this.router.getCurrentNavigation().extras.state.data;  \n        this.auth.getLocation(); \n        // this.getdata();  \n      }\n    });\n   }\n   getdata() {\n    this.auth.database.executeSql('select * from abandon where JOBGUID=?',[this.data['JOBGUID']])\n    .then((res)=>{\n        this.jobOutCome = res.rows.item(0)['OUTCOME'];\n        this.additionalNotes = res.rows.item(0)['JOBNOTE'];\n        this.base64 = res.rows.item(0)['FILEBASE'];\n   });\n  }\n  radiogroupChange(event){\n      this.jobOutCome = event.detail.value;\n      this.jobOutComeFlag = false;\n  }\n\n  textarea(event){\n    this.additionalNotes = event.detail.value;\n    this.additionalNotesFlage = false;\n  }\n\n  openCamera(option : string){\n    this.imageFlage = false;\n    this.cameraOptions = {\n      quality: 20,\n      source :CameraSource.Camera,\n      height:360,\n      width:360,\n      resultType : CameraResultType.Base64,\n      allowEditing : false\n    }\n    this.galleryOption = {\n      quality: 20,\n      source :CameraSource.Photos,\n      height:360,\n      width:360,\n      resultType : CameraResultType.Base64,\n      allowEditing : false\n    }\n    Camera.getPhoto(option == 'cam' ? this.cameraOptions : this.galleryOption).then((imageData) => {\n      let base64Image = 'data:image/jpeg;base64,' + imageData.base64String;\n      this.updatePicture = 'data:image/jpeg;base64,' + imageData.base64String;\n      this.base64 =   imageData.base64String.replace(/\\s+/g, \"+\");\n      \n      // let base64Image = imageData.base64String;\n      // this.updatePicture = imageData.base64String;\n      // this.base64 =   imageData.base64String;\n     }, (err) => {\n      this.auth.showToast(JSON.stringify(err));\n     }); \n  }\n\n  submitAbandon(form:NgForm){\n    let date = String(this.auth.getdateformatV2()).split(' ')[0];\n    if (this.jobOutCome == '') {\n        this.auth.scrollToId(\"joboutcome\");\n        this.jobOutComeFlag = true;\n    } else {\n      if (String(form.value.additionalNotes).trim() == '') {\n        this.additionalNotesFlage = true;\n        this.auth.scrollToId(\"textarea\");\n      } else {\n          if(this.base64==''){\n            this.imageFlage = true;\n            this.auth.scrollToId(\"uploadImage\")\n          }else{   \n            let haveData = \"yes\";\n            this.auth.database.executeSql('update abandon set  OUTCOME=?,JOBNOTE=?,FILEBASE=?,OnDt=?,Latitude=?,Longitude=?,HaveData=? where JOBGUID=? ',[this.jobOutCome,this.additionalNotes,this.base64,date,this.auth.lat,this.auth.long,haveData, this.data['JOBGUID']])\n            .then((res)=>{\n              this.auth.database.executeSql(\"update  jobsstatus set  status=? where JOBGUID=? \",[ 'completed', this.data['JOBGUID']]).then((res)=>{\n                this.router.navigate(['details']);\n                this.auth.showToast(\"Success! Your Job has been abandoned.\",'success');\n              }).catch((e)=>{  });\n            }).catch((e)=>{\n              this.auth.showToast('### Abandon Failure '+JSON.stringify(e),'danger');\n            });\n          }\n      }\n    }   \n  }\n}\n","export default \"<ion-header>\\n  <ion-toolbar color=\\\"secondary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Job Report</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <form #f='ngForm'  >\\n  <ion-card id=\\\"joboutcome\\\" class=\\\"ion-padding\\\">\\n      <ion-radio-group allow-empty-selection='true' (ionChange)='radiogroupChange($event)'>\\n        \\n          <div class=\\\"ion-text-center\\\">\\n            <h5>Job Outcome</h5> \\n          </div>\\n    \\n        <ion-item lines=\\\"none\\\">\\n          <ion-label>Nobody At Home</ion-label>\\n          <ion-radio value=\\\"Nobody at Home\\\" ></ion-radio>\\n        </ion-item>\\n    \\n        <ion-item lines=\\\"none\\\">\\n          <ion-label>No Adult At Home</ion-label>\\n          <ion-radio value=\\\"No Adult at Home\\\"></ion-radio>\\n        </ion-item>\\n    \\n        <ion-item lines=\\\"none\\\">\\n          <ion-label>No Access to boiler</ion-label>\\n          <ion-radio value=\\\"No Access to boiler\\\"></ion-radio>\\n        </ion-item>\\n    \\n        <ion-item lines=\\\"none\\\">\\n          <ion-label>No Parking</ion-label>\\n          <ion-radio value=\\\"No Parking\\\"></ion-radio>\\n        </ion-item>\\n    \\n        <ion-item lines=\\\"none\\\">\\n          <ion-label lines=\\\"none\\\">Boiler Not Working,<br> Cannot Complete This Job.</ion-label>\\n          <ion-radio value=\\\"Boiler Not Working Cannot Complete Service\\\"></ion-radio>\\n        </ion-item>\\n      </ion-radio-group>\\n      <ion-item></ion-item>\\n      <p *ngIf='jobOutComeFlag' class=\\\"alert\\\">Job outcomes cannot be empty</p>\\n  </ion-card>\\n\\n  <ion-card id=\\\"textarea\\\" class=\\\"ion-padding\\\">\\n    <ion-item>\\n      <ion-textarea rows=\\\"5\\\" cols=\\\"20\\\"  \\n      placeholder=\\\"Enter Additional Notes here...\\\"\\n      ngModel \\n      name='additionalNotes'\\n      required\\n      #additionalNotesCtrl='ngModel'\\n      (ionChange)='textarea($event)'\\n      >\\n      </ion-textarea>\\n    </ion-item>\\n    <p *ngIf='(!additionalNotesCtrl.valid && additionalNotesCtrl.touched) || additionalNotesFlage' class=\\\"alert\\\">Additional notes cannot be empty</p>\\n\\n  </ion-card>\\n\\n  <ion-card id=\\\"uploadImage\\\" class=\\\"ion-padding\\\">\\n    <ion-item lines=\\\"full\\\">\\n      <p><b>Upload Image</b></p>\\n      <ion-icon slot=\\\"end\\\" name=\\\"camera\\\" (click)=\\\"openCamera('cam')\\\"></ion-icon>\\n      <ion-icon slot=\\\"end\\\" name=\\\"image\\\" (click)=\\\"openCamera('gall')\\\"></ion-icon>\\n    </ion-item>\\n    <span *ngIf=\\\"updatePicture!= null\\\">\\n      <img [src]=\\\"updatePicture\\\" />\\n    </span>\\n    <p *ngIf='imageFlage' class=\\\"alert\\\">Image cannot be empty</p>\\n  </ion-card>\\n  \\n\\n</form>\\n  \\n</ion-content>\\n\\n<ion-footer>\\n  <ion-button expand=\\\"full\\\" color=\\\"secondary\\\" (click)='submitAbandon(f)' >Submit</ion-button>\\n</ion-footer>\\n\\n\";"],"names":[],"sourceRoot":"webpack:///"}